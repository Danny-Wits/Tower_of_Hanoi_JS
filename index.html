<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Hanoi and Frameâ€“Stewart</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="icon" href="icon.png" />
    <script src="libraries/p5.min.js"></script>
    <script src="libraries/p5.sound.min.js"></script>
  </head>

  <body>
    <div id="header">
      <h1>Tower of Hanoi Visualizer</h1>
      <p class="sub">An Interactive Simulation of the Tower of Hanoi Problem</p>
    </div>

    <script src="sketch.js"></script>
    <button id="toggle-btn" onclick="toggleControls()">&#10005;</button>

    <div id="controls">
      <p>Move Count: <span id="count">0</span></p>
      <label for="disk_count">Disks:</label>
      <div class="input-group">
        <button
          class="decrement"
          onclick="setDiskCount(parseInt(diskCountInput.value) - 1);"
        >
          -
        </button>
        <input id="disk_count" type="number" value="10" min="2" max="14" />
        <button
          class="increment"
          onclick="setDiskCount(parseInt(diskCountInput.value) + 1);"
        >
          +
        </button>
      </div>

      <label for="disk_count">Towers:</label>

      <div class="input-group">
        <button
          class="decrement"
          onclick="setTowerCount(parseInt(towerCountInput.value) - 1);"
        >
          -
        </button>
        <input id="tower_count" type="number" value="3" min="3" max="10" />
        <button
          class="increment"
          onclick="setTowerCount(parseInt(towerCountInput.value) + 1);"
        >
          +
        </button>
      </div>
      <div class="audio-control">
        <span>Audio:</span>
        <input id="audio" type="checkbox" onchange="toggleAudio()" />
        <span>Pause:</span>
        <input id="pause" type="checkbox" onchange="togglePause()" checked />
      </div>
      <h5>Algorithm used</h5>
      <p id="algorithm-description">Classic 3-peg algorithm</p>

      <label for="animation_speed"
        >Animation Speed: <span id="animation_speed_value">0</span></label
      >
      <input id="animation_speed" type="range" value="3" min="1" max="700" />
      <button onclick="solve()">Solve</button>
      <button onclick="reset()">Reset</button>
    </div>
    <script>
      const diskCountInput = document.getElementById("disk_count");
      const animationSpeedInput = document.getElementById("animation_speed");
      const towerCountInput = document.getElementById("tower_count");

      window.addEventListener("load", () => {
        diskCountInput.value = disk_count;
        animationSpeedInput.value = animation_speed;
        towerCountInput.value = intermediate_tower_count + 2;
        document.getElementById("animation_speed_value").innerHTML =
          animation_speed;
      });

      diskCountInput.addEventListener("input", () => {
        disk_count = parseInt(diskCountInput.value);
        reset();
      });

      animationSpeedInput.addEventListener("input", () => {
        animation_speed = parseInt(animationSpeedInput.value);
        document.getElementById("animation_speed_value").innerHTML =
          animation_speed;
      });

      towerCountInput.addEventListener("input", () => {
        intermediate_tower_count = parseInt(towerCountInput.value) - 2;
        reset();
      });
      function setMoveCount(count) {
        document.getElementById("count").innerHTML = count;
      }
      function incrementMoveCount() {
        setMoveCount(parseInt(document.getElementById("count").innerHTML) + 1);
      }
      function setDiskCount(count) {
        if (count < 2) count = 2;
        if (count > 14) count = 14;
        diskCountInput.value = count;
        disk_count = count;
        reset();
      }
      function setTowerCount(count) {
        if (count < 3) count = 3;
        if (count > 10) count = 10;
        const algorithmDescription = document.getElementById(
          "algorithm-description"
        );
        if (count == 3) {
          algorithmDescription.innerHTML = "Classic 3-peg algorithm";
        } else {
          algorithmDescription.innerHTML = "Frame-Stewart algorithm";
        }
        towerCountInput.value = count;
        intermediate_tower_count = count - 2;
        reset();
      }
      function toggleAudio() {
        const audio = document.getElementById("audio");
        audio_enabled = audio.checked;
      }
      function togglePause() {
        const pause = document.getElementById("pause");
        pause_enabled = pause.checked;
      }
      function toggleControls() {
        const toggleBtn = document.getElementById("toggle-btn");
        const controls = document.getElementById("controls");
        if (controls.style.display === "none") {
          controls.style.display = "block";
          toggleBtn.innerHTML = "&#10005;";
        } else {
          controls.style.display = "none";
          toggleBtn.innerHTML = "&#9776;";
        }
      }
    </script>
  </body>
</html>
